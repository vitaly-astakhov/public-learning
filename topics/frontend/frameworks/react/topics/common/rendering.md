# Rendering

## Table of content

- [Overview](#overview)
  - [Triggering a render (Запуск рендеринга)](#triggering-a-render-запуск-рендеринга)
  - [Rendering the component](#rendering-the-component)
  - [React commits changes to the DOM](#react-commits-changes-to-the-dom)
- [Reconciliation](#reconciliation)

## Overview

Рендеринг компонента состоит из трех этапов

1. Запуск рендеринга (***triggering*** *a render*)
2. Рендеринг компонента (***rendering*** *the component*)
3. Привязка к DOM (**committing** *to the DOM*)

### Triggering a render (Запуск рендеринга)

Запуск (*triggering*) рендеринга происходит по двум причинам:

1. Начальный рендеринг компонента (*initial rendering*). Когда ваше приложение запускается, вам нужно запустить (***trigger***) начальный рендеринг. Это делается путем вызова функции [`createRoot`](https://react.dev/reference/react-dom/client/createRoot) с помощью целевого узла DOM (*target DOM node*), и затем вызова его метода `render` с помощью корневого компонента.

2. Обновление состояния компонента (*state updated*). После первоначального рендеринга (*initial rendering*) компонента вы можете запустить (***trigger***) дальнейший рендеринг, обновив его состояние с помощью функции set ([`set` function.](https://react.dev/reference/react/useState#setstate)). Обновление состояния вашего компонента автоматически ставит рендеринг в очередь.

Обновление состояния запускает рендеринга.

### Rendering the component

После запуска рендеринга (*trigger a render*) React *вызывает* ваши компоненты, чтобы определить, что отображать на экране. То есть, "рендеринг" - это *вызов* React ваших компонентов.

При первоначальном рендеринге (*initial rendering*) React вызовет корневой компонент (*root component*).

При последующих рендерах (*subsequent renders*) React вызовет функциональный компонент, обновление состояния которого вызвало рендеринг.

Этот процесс является рекурсивным: если обновленный компонент возвращает какой-либо другой компонент, React отрисует (*render*) этот компонент следующим, и если этот компонент также что-то возвращает, он отрисует (*render*) этот компонент следующим, и так далее. Процесс будет продолжаться до тех пор, пока больше не останется вложенных компонентов и React не будет точно знать, что должно отображаться на экране.

### React commits changes to the DOM

После рендеринга (*rendering*) (вызова) ваших компонентов React изменит DOM.

Для первоначального рендеринга React будет использовать DOM API [`appendChild()`](https://developer.mozilla.org/docs/Web/API/Node/appendChild), чтобы вывести все созданные узлы DOM на экран.

Для повторного рендеринга (*re-render*) React применит минимально необходимые операции (рассчитанные во время рендеринга!) чтобы DOM соответствовал последнему результату рендеринга.

React изменяет узлы DOM только в том случае, если есть разница между рендерами.

После завершения рендеринга и обновления DOM в React браузер перерисует экран.

___

## Reconciliation

**Reconciliation (согласование)** - это алгоритм (процесс) сравнения виртуального дерева элементов (Virtual DOM) с предыдущим состоянием и определения необходимых изменений для обновления реального DOM.

Reconciliation происходит внутри React, когда происходит перерисовка. React сравнивает новое виртуальное дерево элементов с предыдущим состоянием, чтобы определить, какие части интерфейса изменились.
